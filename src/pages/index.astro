---
export const prerender = true;

import Layout from '../layouts/Layout.astro';
import TopicCard from '../components/TopicCard.astro';
import { Newsletter } from '../components/Newsletter';
import { changelog } from '../data/changelog';
import { topicData, calculateResourceCount } from '../data/topics';

// Transform topic data and calculate resource counts
const topics = Object.entries(topicData).map(([slug, data]) => {
  const resourceCount = calculateResourceCount(slug);
  return {
    title: data.title,
    description: data.description,
    icon: data.icon || '📚',
    slug,
    resourceCount: resourceCount ? {
      videos: resourceCount.videos,
      articles: resourceCount.articles,
      books: resourceCount.books
    } : null
  };
});

const guides = [
  {
    title: 'Unshackling the Muslim Mind from Secular Thought',
    url: 'https://yaqeeninstitute.org/read/paper/breaking-free-unshackling-the-muslim-mind-from-secular-thought-and-reestablishing-the-islamic-personality',
    language: 'Indonesia'
  },
  {
    title: 'Pengertian dan Tujuan Mempelajari Akidah',
    url: 'https://www.akidah.net/pengertian-dan-tujuan-mempelajari-akidah/',
    language: 'Indonesia'
  },
  {
    title: 'BELAJAR SEJARAH DARI ALQURAN',
    url: 'https://www.akidah.net/belajar-sejarah-dari-alquran/',
    language: 'Indonesia'
  },
  {
    title: "TAFSIR AL-QUR'AN: RELATIF ATAU ABSOLUT?",
    url: 'https://www.akidah.net/tafsir-al-quran-relatif-atau-absolut/',
    language: 'English'
  },
  {
    title: 'MEKANISME PENGETAHUAN (QIYÂS/ANALOGI)',
    url: 'https://www.akidah.net/mekanisme-pengetahuan-qiyas-analogi/',
    language: 'Indonesia'
  },
  {
    title: 'SUMBER PENGETAHUAN (MASÂDIR AL-MA\'RIFAH) IBNU TAIMIYAH',
    url: 'https://www.akidah.net/sumber-pengetahuan-masadir-al-marifah-ibnu-taimiyah/',
    language: 'English'
  }
];

// Get only the latest 5 changelog entries for the homepage
const latestChangelog = changelog.slice(0, 5);
---

<Layout title="Islamic Roadmap - Sedang Update Mayor">
  <main class="min-h-screen bg-gradient-to-br from-emerald-50 via-teal-50 to-cyan-50">
    <!-- Maintenance Hero Section -->
    <section class="py-20 px-4">
      <div class="container mx-auto max-w-4xl text-center">
        <!-- Animated Construction Icon -->
        <div class="mb-8">
          <div class="inline-block animate-bounce">
            <span class="text-8xl">🚧</span>
          </div>
        </div>

        <!-- Main Title -->
        <h1 class="text-4xl md:text-6xl font-bold mb-6 bg-gradient-to-r from-emerald-700 to-teal-700 bg-clip-text text-transparent">
          Sedang Update Mayor
        </h1>
        
        <!-- Subtitle -->
        <p class="text-xl md:text-2xl text-gray-600 mb-8 max-w-2xl mx-auto">
          Kami sedang melakukan pembaruan besar-besaran untuk memberikan pengalaman belajar Islam yang lebih baik
        </p>

        <!-- Status Card -->
        <div class="bg-white/70 backdrop-blur-sm rounded-2xl p-8 shadow-xl mb-12 max-w-2xl mx-auto">
          <div class="flex items-center justify-center gap-3 mb-4">
            <span class="text-3xl">⚡</span>
            <h2 class="text-2xl font-bold text-gray-800">Update Progress</h2>
          </div>
          
          <!-- Progress Bar -->
          <div class="mb-6">
            <div class="flex justify-between text-sm text-gray-600 mb-2">
              <span>Progress Update</span>
              <span>85%</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-3">
              <div class="bg-gradient-to-r from-emerald-500 to-teal-500 h-3 rounded-full transition-all duration-1000 ease-out" style="width: 85%"></div>
            </div>
          </div>

          <!-- Estimated Time -->
          <div class="text-center">
            <p class="text-gray-700 mb-2">
              <span class="font-semibold">Estimasi Selesai:</span>
            </p>
            <p class="text-2xl font-bold text-emerald-600">
              2-3 Hari Lagi
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- What's New Section -->
    <section class="py-16 px-4">
      <div class="container mx-auto max-w-4xl">
        <div class="text-center mb-12">
          <h2 class="text-3xl font-bold mb-4 bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
            🎉 Fitur Baru yang Akan Hadir
          </h2>
          <p class="text-gray-600">
            Update mayor ini akan membawa banyak fitur baru yang akan meningkatkan pengalaman belajar Anda
          </p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          <!-- Feature 1 -->
          <div class="bg-white/60 backdrop-blur-sm rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300">
            <div class="text-4xl mb-4">📧</div>
            <h3 class="text-lg font-semibold text-gray-800 mb-2">Newsletter System</h3>
            <p class="text-gray-600 text-sm">
              Dapatkan update artikel dan konten terbaru langsung ke email Anda dengan sistem newsletter otomatis.
            </p>
          </div>

          <!-- Feature 2 -->
          <div class="bg-white/60 backdrop-blur-sm rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300">
            <div class="text-4xl mb-4">🔐</div>
            <h3 class="text-lg font-semibold text-gray-800 mb-2">Enhanced Security</h3>
            <p class="text-gray-600 text-sm">
              Sistem keamanan yang lebih kuat dengan autentikasi berlapis dan perlindungan data yang lebih baik.
            </p>
          </div>

          <!-- Feature 3 -->
          <div class="bg-white/60 backdrop-blur-sm rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300">
            <div class="text-4xl mb-4">📊</div>
            <h3 class="text-lg font-semibold text-gray-800 mb-2">Advanced Analytics</h3>
            <p class="text-gray-600 text-sm">
              Analisis pembelajaran yang lebih detail dengan insights dan rekomendasi personal.
            </p>
          </div>

          <!-- Feature 4 -->
          <div class="bg-white/60 backdrop-blur-sm rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300">
            <div class="text-4xl mb-4">🎯</div>
            <h3 class="text-lg font-semibold text-gray-800 mb-2">Goal Setting</h3>
            <p class="text-gray-600 text-sm">
              Tetapkan target pembelajaran dengan sistem goal setting dan tracking yang lebih canggih.
            </p>
          </div>

          <!-- Feature 5 -->
          <div class="bg-white/60 backdrop-blur-sm rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300">
            <div class="text-4xl mb-4">🌙</div>
            <h3 class="text-lg font-semibold text-gray-800 mb-2">Islamic Calendar</h3>
            <p class="text-gray-600 text-sm">
              Integrasi kalender Hijriah dengan reminder untuk ibadah dan momen-momen penting.
            </p>
          </div>

          <!-- Feature 6 -->
          <div class="bg-white/60 backdrop-blur-sm rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300">
            <div class="text-4xl mb-4">💬</div>
            <h3 class="text-lg font-semibold text-gray-800 mb-2">Community Features</h3>
            <p class="text-gray-600 text-sm">
              Fitur komunitas untuk diskusi, sharing progress, dan saling mendukung dalam pembelajaran.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Stay Connected Section -->
    <section class="py-16 px-4 bg-white/30">
      <div class="container mx-auto max-w-3xl text-center">
        <h2 class="text-3xl font-bold mb-6 bg-gradient-to-r from-emerald-700 to-teal-700 bg-clip-text text-transparent">
          Tetap Terhubung
        </h2>
        <p class="text-gray-600 mb-8">
          Jangan sampai ketinggalan update terbaru! Ikuti kami di media sosial atau subscribe newsletter.
        </p>

        <!-- Newsletter Signup -->
        <div class="bg-white/70 backdrop-blur-sm rounded-2xl p-8 shadow-xl mb-8">
          <div class="flex items-center justify-center gap-3 mb-4">
            <span class="text-3xl">📧</span>
            <h3 class="text-xl font-bold text-gray-800">Subscribe Newsletter</h3>
          </div>
          <p class="text-gray-600 mb-6">
            Dapatkan notifikasi langsung ketika website sudah kembali online dan fitur-fitur baru tersedia.
          </p>
          <div class="flex flex-col sm:flex-row gap-4 max-w-md mx-auto">
            <input 
              type="email" 
              placeholder="Masukkan email Anda"
              class="flex-1 px-4 py-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent"
            >
            <button class="px-6 py-3 bg-gradient-to-r from-emerald-600 to-teal-600 text-white rounded-lg font-semibold hover:shadow-lg transition-all duration-300">
              Subscribe
            </button>
          </div>
        </div>

        <!-- Contact Info -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div class="bg-white/60 backdrop-blur-sm rounded-xl p-6 shadow-lg">
            <div class="text-3xl mb-3">📱</div>
            <h4 class="font-semibold text-gray-800 mb-2">Follow Social Media</h4>
            <p class="text-gray-600 text-sm">
              Ikuti update terbaru di media sosial kami untuk mendapatkan informasi real-time.
            </p>
          </div>
          
          <div class="bg-white/60 backdrop-blur-sm rounded-xl p-6 shadow-lg">
            <div class="text-3xl mb-3">💌</div>
            <h4 class="font-semibold text-gray-800 mb-2">Email Support</h4>
            <p class="text-gray-600 text-sm">
              Ada pertanyaan? Hubungi kami di <br>
              <a href="mailto:support@islamicroadmap.cloud" class="text-emerald-600 hover:underline">
                support@islamicroadmap.cloud
              </a>
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="py-8 px-4 text-center">
      <div class="container mx-auto">
        <p class="text-gray-500 mb-4">
          Terima kasih atas kesabaran Anda. Kami bekerja keras untuk memberikan yang terbaik! 🤲
        </p>
        <div class="flex items-center justify-center gap-2 text-sm text-gray-400">
          <span>Last updated:</span>
          <span id="last-updated"></span>
        </div>
      </div>
    </footer>
  </main>

  <script>
    // Update last updated time
    document.getElementById('last-updated')!.textContent = new Date().toLocaleString('id-ID');
    
    // Simple newsletter subscription (you can connect this to your actual API later)
    document.querySelector('button')!.addEventListener('click', function() {
      const emailInput = document.querySelector('input[type="email"]') as HTMLInputElement;
      const email = emailInput.value;
      if (email) {
        alert('Terima kasih! Kami akan mengirimkan update ke ' + email + ' segera setelah website kembali online.');
        emailInput.value = '';
      } else {
        alert('Mohon masukkan email yang valid.');
      }
    });
  </script>
</Layout>